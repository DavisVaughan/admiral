<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Merge variables from a second dataset — derive_merged_vars • admiral</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Merge variables from a second dataset — derive_merged_vars" />

<meta property="og:description" content="Merges variables from a second dataset. The observations to merge can be
selected by a condition and/or by selecting the first observation in each by
group." />

<meta property="og:image" content="/logo.png" />





<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">admiral</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/admiral.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/contributing.html">Contributing to admiral</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Merge variables from a second dataset</h1>
    
    <div class="hidden name"><code>derive_merged_vars.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Merges variables from a second dataset. The observations to merge can be
selected by a condition and/or by selecting the first observation in each by
group.</p>
    
    </div>

    <pre class="usage"><span class='fu'>derive_merged_vars</span>(<span class='no'>dataset</span>, <span class='no'>dataset_add</span>, <span class='kw'>filter_add</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>new_vars</span>,
  <span class='kw'>by_vars</span> <span class='kw'>=</span> <span class='fu'><a href='https://rlang.r-lib.org/reference/quotation.html'>exprs</a></span>(<span class='no'>USUBJID</span>), <span class='kw'>filter_order</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>filter_mode</span> <span class='kw'>=</span> <span class='st'>"last"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dataset</th>
      <td><p>Input dataset</p>
<p>The variables specified by the <code>by_vars</code> parameter are expected.</p></td>
    </tr>
    <tr>
      <th>dataset_add</th>
      <td><p>Dataset to add</p>
<p>The variables specified by the <code>by_vars</code>, the <code>filter_add</code>, and the
<code>filter_first_order</code> parameter are expected.</p></td>
    </tr>
    <tr>
      <th>filter_add</th>
      <td><p>Filter condition for dataset to add</p>
<p>Only observations of the add dataset which fulfill the specified condition
are used for merging.</p>
<p>Permitted Values: logical expression</p></td>
    </tr>
    <tr>
      <th>new_vars</th>
      <td><p>Variable to add</p>
<p>The specified variables are created in the add dataset and then merge to
the input dataset.</p>
<p>Permitted Values: list of name-value pairs</p></td>
    </tr>
    <tr>
      <th>by_vars</th>
      <td><p>Grouping variables</p>
<p>Default: <code><a href='https://rlang.r-lib.org/reference/quotation.html'>exprs(USUBJID)</a></code></p>
<p>Permitted Values: list of variables</p></td>
    </tr>
    <tr>
      <th>filter_order</th>
      <td><p>Sort order</p>
<p>If the parameter is specified, the add dataset is ordered by the specified
order and only the first or last observation (depending on the filter mode)
in each by group is used for merging.</p>
<p>Permitted Values: list of variables or functions of variables</p></td>
    </tr>
    <tr>
      <th>filter_mode</th>
      <td><p>Filter mode</p>
<p>If the <code>filter_order</code> parameter is specified, the filter mode determines if
the first or last observation of each by group is selected.</p>
<p>Default: <code>"last"</code></p>
<p>Permitted Values: <code>"first"</code>, <code>"last"</code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The input dataset with variables from the add dataset</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For each group (with respect to the variables specified for the
<code>by_vars</code> parameter) the first observation (with respect to the order
specified for the <code>order</code> parameter) is included in the output dataset.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>magrittr</span>)

<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='st'>"ex"</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='st'>"dm"</span>)

<span class='co'># adding first treatment start date for each patient</span>
<span class='fu'>derive_merged_vars</span>(<span class='no'>dm</span>,
                   <span class='kw'>dataset_add</span> <span class='kw'>=</span> <span class='no'>ex</span>,
                   <span class='kw'>filter_add</span> <span class='kw'>=</span> <span class='fu'><a href='https://rlang.r-lib.org/reference/quotation.html'>exprs</a></span>(<span class='no'>EXDOSE</span> <span class='kw'>&gt;</span> <span class='fl'>0</span> <span class='kw'>|</span> <span class='fu'>str_detect</span>(<span class='no'>EXTRT</span>, <span class='st'>'PLACEBO'</span>)),
                   <span class='kw'>new_vars</span> <span class='kw'>=</span> <span class='fu'><a href='https://rlang.r-lib.org/reference/quotation.html'>exprs</a></span>(<span class='no'>TRTSDT</span> <span class='kw'>:=</span> <span class='fu'>ymd</span>(<span class='no'>EXSTDTC</span>)),
                   <span class='kw'>filter_order</span> <span class='kw'>=</span> <span class='fu'><a href='https://rlang.r-lib.org/reference/quotation.html'>exprs</a></span>(<span class='no'>EXSTDTC</span>, <span class='no'>EXSEQ</span>),
                   <span class='kw'>filter_mode</span> <span class='kw'>=</span> <span class='st'>"first"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span>(<span class='no'>USUBJID</span>, <span class='no'>TRTSDT</span>)</div><div class='output co'>#&gt; # A tibble: 306 x 2
#&gt;    USUBJID     TRTSDT    
#&gt;    &lt;chr&gt;       &lt;date&gt;    
#&gt;  1 01-701-1015 2014-01-02
#&gt;  2 01-701-1023 2012-08-05
#&gt;  3 01-701-1028 2013-07-19
#&gt;  4 01-701-1033 2014-03-18
#&gt;  5 01-701-1034 2014-07-01
#&gt;  6 01-701-1047 2013-02-12
#&gt;  7 01-701-1057 NA        
#&gt;  8 01-701-1097 2014-01-01
#&gt;  9 01-701-1111 2012-09-07
#&gt; 10 01-701-1115 2012-11-30
#&gt; # … with 296 more rows</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Thomas Neitmann, Alice Ehmann, Stefan Bundfuss, Samia Kabi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


